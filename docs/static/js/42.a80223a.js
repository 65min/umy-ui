(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{634:function(e,t,n){"use strict";n.r(t);var l=n(602),i={name:"dragRow",data:function(){return{tableColumn:[{field:"name",title:"Name",fixed:"left",minWidth:200},{field:"sex",title:"Sex",minWidth:100},{field:"age",title:"Age",minWidth:150},{field:"describe",title:"describe",minWidth:200,showOverflow:!0}],tableData:[],demo:['<template>\n    <div>\n        <h3>拖拽行</h3>\n        <p>ux-grid使用 sortablejs 实现行移动，由于直接操作了 Dom 节点，需要与 Vue 的数据同步，必须设置 row-key （注：该示例仅供参考，具体逻辑请自行实现）</p>\n        <p>你如果使用拖拽行，那么就是使用第三方的东西，<a href="https://github.com/SortableJS/Sortable" target="_blank">请先安装sortablejs</a></p>\n        <ux-grid\n                border\n                row-key\n                height="400"\n                ref="plxTable"\n                :data="tableData">\n            <ux-table-column\n                    v-for="item in tableColumn"\n                    :key="item.id"\n                    :resizable="item.resizable"\n                    :field="item.field"\n                    :title="item.title"\n                    :sortable="item.sortable"\n                    :width="item.minWidth"\n                    :fixed="item.fixed"/>\n            <ux-table-column title="额外信息" minWidth="60" field="describe"></ux-table-column>\n        </ux-grid>\n    </div>\n</template>'," import Sortable from 'sortablejs/modular/sortable.core.esm.js';\n    export default {\n        name: \"dragRow\",\n        data () {\n            return {\n                tableColumn: [\n                    { field: 'name', title: 'Name', fixed: 'left', minWidth: 200 },\n                    { field: 'sex', title: 'Sex', minWidth: 100 },\n                    { field: 'age', title: 'Age', minWidth: 150 },\n                    { field: 'describe', title: 'describe', minWidth: 200, showOverflow: true }\n                ],\n                tableData: []\n            }\n        },\n        mounted () {\n            this.tableData = Array.from({ length: 20 }, (_, idx) => ({\n                id: idx + 1,\n                name: 'pl' + idx,\n                sex: idx,\n                age: 18,\n                describe: '欢迎使用plx' + idx\n            }))\n            this.columnDrop()\n        },\n        beforeDestroy () {\n            if (this.sortable) {\n                this.sortable.destroy()\n            }\n        },\n        methods: {\n            columnDrop () {\n                this.$nextTick(() => {\n                    let plxTable = this.$refs.plxTable\n                    // 关于sortable的配置https://www.cnblogs.com/xiangsj/p/6628003.html\n                    this.sortable = Sortable.create(plxTable.$el.querySelector('.body--wrapper .plx-table--body tbody'), {\n                        handle: \".plx-body--row\",  // Drag handle selector within list items\n                        // 拖拽结束\n                        onEnd: ({ item, newIndex, oldIndex }) => {\n                            let currRow = this.tableData.splice(oldIndex, 1)[0]\n                            this.tableData.splice(newIndex, 0, currRow)\n                        }\n                    })\n                })\n            }\n        }\n    }"]}},mounted:function(){this.tableData=Array.from({length:20},(function(e,t){return{id:t+1,name:"pl"+t,sex:t,age:18,describe:"欢迎使用plx"+t}})),this.columnDrop()},beforeDestroy:function(){this.sortable&&this.sortable.destroy()},methods:{columnDrop:function(){var e=this;this.$nextTick((function(){var t=e.$refs.plxTable;e.sortable=l.a.create(t.$el.querySelector(".body--wrapper .plx-table--body tbody"),{handle:".plx-body--row",onEnd:function(t){t.item;var n=t.newIndex,l=t.oldIndex,i=e.tableData.splice(l,1)[0];e.tableData.splice(n,0,i)}})}))}}},a=n(34),r=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("拖拽行")]),n("p",[e._v("ux-grid使用 sortablejs 实现行移动，由于直接操作了 Dom 节点，需要与 Vue 的数据同步，必须设置 row-key （注：该示例仅供参考，具体逻辑请自行实现）")]),e._m(0),n("ux-grid",{ref:"plxTable",attrs:{border:"","row-key":"",height:"400",data:e.tableData}},[e._l(e.tableColumn,(function(e){return n("ux-table-column",{key:e.id,attrs:{resizable:e.resizable,field:e.field,title:e.title,sortable:e.sortable,width:e.minWidth,fixed:e.fixed}})})),n("ux-table-column",{attrs:{title:"额外信息",minWidth:"60",field:"describe"}})],2),n("pre",[e._v("        "),n("code",[e._v(e._s(e.demo[0]))]),e._v("\n        "),n("code",[e._v(e._s(e.demo[1]))]),e._v("\n    ")])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("你如果使用拖拽行，那么就是使用第三方的东西，"),t("a",{attrs:{href:"https://github.com/SortableJS/Sortable",target:"_blank"}},[this._v("请先安装sortablejs")])])}],!1,null,null,null);t.default=r.exports}}]);